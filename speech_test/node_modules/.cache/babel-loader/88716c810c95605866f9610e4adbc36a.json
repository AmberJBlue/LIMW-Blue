{"ast":null,"code":"import Vector from 'vectory-lib';\n\nconst Repeller = () => {\n  const config = {\n    text: `Say something\n    positive.`,\n    widthToSpikeLengthRatio: 0.054\n  };\n  const colorConfig = {\n    particleOpacity: 0.2,\n    baseHue: 350,\n    hueRange: 9,\n    hueSpeed: 0.04,\n    colorSaturation: 100\n  };\n\n  class Planet {\n    constructor(x, y, g) {\n      this.pos = new Vector(x, y);\n      this.g = g;\n    }\n\n    draw() {\n      ctx.fillStyle = \"transparent\";\n      ctx.beginPath();\n      ctx.arc(this.pos.x, this.pos.y, 8, 0, Math.PI * 2);\n      ctx.fill();\n    }\n\n  } // A line that is part of forming the text\n\n\n  class Particle {\n    constructor(x, y) {\n      this.pos = new Vector(x, y);\n      this.vel = new Vector(0, spikeLength);\n    }\n\n    move(force) {\n      if (force) {\n        this.vel.addTo(force);\n      }\n\n      if (this.vel.getLength() > spikeLength) {\n        this.vel.setLength(spikeLength);\n      }\n    }\n\n    draw() {\n      ctx.beginPath();\n      ctx.moveTo(this.pos.x, this.pos.y);\n      let p2 = this.pos.add(this.vel);\n      ctx.lineTo(p2.x, p2.y);\n      ctx.stroke();\n    }\n\n  }\n\n  let canvas;\n  let ctx;\n  let w, h;\n  let hue;\n  let particles;\n  let spikeLength;\n  let planets;\n  let A;\n  let B;\n  let a;\n  let b;\n  let tick;\n\n  function setup() {\n    tick = 0;\n    planets = [];\n    let len = Math.round(Math.random() * 3 + 3);\n\n    for (let i = 0; i < len; i++) {\n      let p = new Planet(50 + i * 100, 340, i ? 1000 : 4000);\n      planets.push(p);\n    } // canvas = document.querySelector(\"#repeller-canvas\");\n    // ctx = canvas.getContext(\"2d\");\n    // window.addEventListener(\"resize\", reset);\n    // canvas.addEventListener(\"mousemove\", mousemove);\n    // reset();\n\n  } //   function reset() {\n  //     hue = colorConfig.baseHue; \n  //     w = canvas.width = window.innerWidth;\n  //     h = canvas.height = window.innerHeight;\n  //     spikeLength = w * config.widthToSpikeLengthRatio;\n  //     A = w / 2.2;\n  //     B = h / 2.2;\n  //     a = Math.round(Math.random() + 2);\n  //     b = Math.round(Math.random() + 2);\n  //     drawText();\n  //   }\n  //   function mousemove(event) {\n  //     let x = event.clientX;\n  //     let y = event.clientY;\n  //     planets[0].pos.x = x;\n  //     planets[0].pos.y = y;\n  //   }\n\n\n  function draw(now) {\n    clear();\n    requestAnimationFrame(draw);\n    updateParticles();\n    updatePlanets();\n    tick = now / 50;\n  }\n\n  function clear() {\n    ctx.clearRect(0, 0, w, h);\n  }\n\n  function drawText() {\n    ctx.save();\n    let fontSize = w * 0.2;\n    ctx.font = \"bold \" + fontSize + \"px Arial, Helvetica, sans-serif\";\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\";\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"white\";\n    ctx.strokeText(config.text, w / 2, h / 2);\n    ctx.restore();\n    let imageData = ctx.getImageData(0, 0, w, h);\n    particles = [];\n\n    for (let x = 0; x < w; x++) {\n      for (let y = 0; y < h; y++) {\n        let i = (x + w * y) * 4;\n        let average = (imageData.data[i] + imageData.data[i + 1] + imageData.data[i + 2] + imageData.data[i + 3]) / 4;\n\n        if (average > 200) {\n          let particle = new Particle(x, y);\n          particles.push(particle);\n        }\n      }\n    }\n\n    clear();\n  }\n\n  function updatePlanets() {\n    let len = planets.length;\n\n    for (let i = 1; i < len; i++) {\n      let angle = Math.PI * 2 / (len - 1) * i;\n      let x = A * Math.sin(a * tick / 100 + angle) + w / 2;\n      let y = B * Math.sin(b * tick / 100 + angle) + h / 2;\n      let p = planets[i];\n      p.pos.x = x;\n      p.pos.y = y;\n      p.draw();\n    }\n  }\n\n  function updateParticles() {\n    hue += colorConfig.hueSpeed;\n    let h = Math.sin(hue) * colorConfig.hueRange + colorConfig.baseHue;\n    ctx.strokeStyle = `hsla(${h}, ${colorConfig.colorSaturation}%, 50%, ${colorConfig.particleOpacity})`;\n    particles.forEach(p => {\n      // Apply the force of each planet (repeller) to the current particle\n      planets.forEach(planet => {\n        let d = p.pos.sub(planet.pos);\n        let length = d.getLength();\n        let g = planet.g / length;\n\n        if (g > 40) {\n          g = 40;\n        } // We keep the angle of the distance\n\n\n        d.setLength(g);\n        p.move(d);\n      });\n      p.draw();\n    });\n  }\n\n  console.log('fdasfs');\n  setup();\n  draw(1);\n  return;\n};\n\n_c = Repeller;\nexport default Repeller;\n\nvar _c;\n\n$RefreshReg$(_c, \"Repeller\");","map":{"version":3,"sources":["/Users/Work/Documents/Projects/School/SS2022/ARCH8803/LIMW-Blue/bridge-viz-test/src/components/Animations/repeller.js"],"names":["Vector","Repeller","config","text","widthToSpikeLengthRatio","colorConfig","particleOpacity","baseHue","hueRange","hueSpeed","colorSaturation","Planet","constructor","x","y","g","pos","draw","ctx","fillStyle","beginPath","arc","Math","PI","fill","Particle","vel","spikeLength","move","force","addTo","getLength","setLength","moveTo","p2","add","lineTo","stroke","canvas","w","h","hue","particles","planets","A","B","a","b","tick","setup","len","round","random","i","p","push","now","clear","requestAnimationFrame","updateParticles","updatePlanets","clearRect","drawText","save","fontSize","font","textAlign","textBaseline","lineWidth","strokeStyle","strokeText","restore","imageData","getImageData","average","data","particle","length","angle","sin","forEach","planet","d","sub","console","log"],"mappings":"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","sourcesContent":["\nimport Vector from 'vectory-lib';\n\nconst Repeller  = () => {\n\n  const config = {\n    text: `Say something\n    positive.`,\n    widthToSpikeLengthRatio: 0.054\n  };\n  \n  const colorConfig = {\n    particleOpacity: 0.2,\n    baseHue: 350,\n    hueRange: 9,\n    hueSpeed: 0.04,\n    colorSaturation: 100,\n  };\n  \n  class Planet {\n    constructor(x, y, g) {\n      this.pos = new Vector(x, y);\n      this.g = g;\n    }\n    \n    draw() {\n      ctx.fillStyle = \"transparent\";\n      ctx.beginPath();\n      ctx.arc(this.pos.x, this.pos.y, 8, 0, Math.PI * 2);\n      ctx.fill();  \n    } \n  }\n  \n  // A line that is part of forming the text\n  class Particle {\n    constructor(x, y) {\n      this.pos = new Vector(x, y);\n      this.vel = new Vector(0, spikeLength);\n    }\n    \n    move(force) {\n      if(force) {\n        this.vel.addTo(force);\n      }\n      if(this.vel.getLength() > spikeLength) {\n        this.vel.setLength(spikeLength);\n      }\n    }\n      \n    draw() {\n      ctx.beginPath();\n      ctx.moveTo(this.pos.x, this.pos.y);\n      let p2 = this.pos.add(this.vel);\n      ctx.lineTo(p2.x, p2.y);\n      ctx.stroke();  \n    }  \n  }\n  \n  let canvas;\n  let ctx;\n  let w, h;\n  let hue;\n  let particles;\n  let spikeLength;\n  let planets;\n  let A;\n  let B;\n  let a;\n  let b;\n  let tick;\n  \n  function setup() {\n    tick = 0;\n    planets = [];\n    let len = Math.round(Math.random() * 3 + 3);\n    for(let i = 0; i < len; i++) {\n      let p = new Planet(50 + i * 100, 340, i ? 1000 : 4000);\n      planets.push(p);\n    }\n    // canvas = document.querySelector(\"#repeller-canvas\");\n    // ctx = canvas.getContext(\"2d\");\n    // window.addEventListener(\"resize\", reset);\n    // canvas.addEventListener(\"mousemove\", mousemove);\n    // reset();\n  }\n  \n//   function reset() {\n//     hue = colorConfig.baseHue; \n//     w = canvas.width = window.innerWidth;\n//     h = canvas.height = window.innerHeight;\n//     spikeLength = w * config.widthToSpikeLengthRatio;\n//     A = w / 2.2;\n//     B = h / 2.2;\n//     a = Math.round(Math.random() + 2);\n//     b = Math.round(Math.random() + 2);\n//     drawText();\n//   }\n  \n//   function mousemove(event) {\n//     let x = event.clientX;\n//     let y = event.clientY;\n//     planets[0].pos.x = x;\n//     planets[0].pos.y = y;\n//   }\n  \n  function draw(now) {\n    clear();\n    requestAnimationFrame(draw);\n    updateParticles();\n    updatePlanets();\n    tick = now / 50;\n  }\n  \n  function clear() {\n    ctx.clearRect(0, 0, w, h);\n  }\n  \n  function drawText() {\n    ctx.save();\n    let fontSize = w * 0.2;\n    ctx.font = \"bold \" + fontSize + \"px Arial, Helvetica, sans-serif\";\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\"\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"white\";\n    ctx.strokeText(config.text, w/2, h/2);\n    ctx.restore();\n    let imageData = ctx.getImageData(0, 0, w, h);\n  \n    particles = [];\n  \n    for(let x = 0; x < w; x++) {\n      for(let y = 0; y < h; y++) {\n        let i = (x + w*y)*4;\n        let average = (imageData.data[i] + \n                       imageData.data[i + 1] + \n                       imageData.data[i + 2] +\n                       imageData.data[i + 3]) / 4;\n        if(average > 200) {\n          let particle = new Particle(x, y);\n          particles.push(particle);\n        }\n      }\n    }\n    clear();\n  }\n  \n  function updatePlanets() {\n    let len = planets.length;\n    for(let i = 1; i < len; i++) {\n      let angle = Math.PI * 2 / (len - 1) * i;\n      let x = A * Math.sin(a * tick / 100 + angle) + w/2;\n      let y = B * Math.sin(b * tick / 100 + angle) + h/2; \n      let p = planets[i];\n      p.pos.x = x;\n      p.pos.y = y;\n      p.draw();\n    }\n  }\n  \n  function updateParticles() {\n    hue += colorConfig.hueSpeed; \n    let h = Math.sin(hue) * colorConfig.hueRange + colorConfig.baseHue;\n    ctx.strokeStyle = `hsla(${h}, ${colorConfig.colorSaturation}%, 50%, ${colorConfig.particleOpacity})`;  \n    particles.forEach(p => {\n      // Apply the force of each planet (repeller) to the current particle\n      planets.forEach(planet => {\n        let d = p.pos.sub(planet.pos);\n        let length = d.getLength();\n        let g = planet.g / length;\n        if(g > 40) {\n          g = 40;\n        }\n        // We keep the angle of the distance\n        d.setLength(g);\n        p.move(d);\n      });\n      p.draw();\n    });\n  }\n    console.log('fdasfs')\n    setup();\n    draw(1);\n  return \n};\n\nexport default Repeller;\n\n\n\n  \n  \n  "]},"metadata":{},"sourceType":"module"}